<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>动态 - 大沄</title><link rel="icon" href="images/logo.png" type="image/png"><style>.news-container{ opacity: 0; transition: opacity 0.5s ease;} .news-container.loaded{ opacity: 1;} [data-aos]{ opacity: 0; transform: translateY(20px); transition: opacity 0.7s ease-out, transform 0.7s ease-out;} .page-loader{ position: fixed; top: 80px; left: 0; width: 100%; height: calc(100% - 80px); background: var(--bg-color, #ffffff); z-index: 999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease, visibility 0.5s ease;} @media (max-width: 768px){ .page-loader{ top: 60px; height: calc(100% - 60px);}} .page-loader.hidden{ opacity: 0; visibility: hidden;} .loader-spinner{ width: 40px; height: 40px; border: 3px solid rgba(0, 0, 0, 0.1); border-radius: 50%; border-top-color: var(--primary-gradient-start, #66a7bd); animation: spin 1s ease-in-out infinite;} @keyframes spin{ to{ transform: rotate(360deg);}} html.dark-mode .loader-spinner{ border: 3px solid rgba(255, 255, 255, 0.1); border-top-color: var(--primary-gradient-start, #468ca0);} header, .theme-toggle{ visibility: visible !important; opacity: 1 !important; z-index: 1000 !important;} main{ position: relative; z-index: 1;} </style><script>const isDarkMode=localStorage.getItem('darkMode')===null ? true : localStorage.getItem('darkMode')==='true'; if (localStorage.getItem('darkMode')===null){ localStorage.setItem('darkMode', 'true');} if (isDarkMode){ document.documentElement.classList.add('dark-mode');} </script><link rel="stylesheet" href="css/style.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head><body><div class="page-loader"><div class="loader-spinner"></div></div><header><div class="container"><nav><div class="logo"><a href="./"><img src="images/logo.png" alt="我的网站" class="logo-img"></a></div><ul class="nav-links"><li><a href="./">首页</a></li><li><a href="projects">项目</a></li><li><a href="" class="active">动态</a></li><li><a href="contact">联系我</a></li><li class="mobile-only"><a href="javascript:void(0);" class="theme-option"><i class="fas fa-moon"></i>切换主题</a></li></ul><div class="nav-controls"><div class="theme-toggle" data-tooltip="切换为浅色模式"><i class="fas fa-moon"></i></div><div class="menu-btn"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div></div></nav></div></header><main><section class="page-header" style="margin-bottom: -60px;"><div class="container"><h1>动态</h1><p>分享我的最新动态和生活片段</p></div></section><section class="news-feed"><div class="container"><div class="news-container"><div class="search-card"><h3 class="sidebar-title">搜索动态</h3><form class="search-form" id="newsSearchForm"><div class="search-input-group"><input type="text" placeholder="输入关键词搜索..." id="newsSearchInput" required><button type="submit" class="search-btn"><i class="fas fa-search"></i></button></div></form><div class="search-results" id="searchResults" style="display: none;"><h4 class="search-results-title">搜索结果：<span id="resultsCount">0</span></h4><div class="search-results-list" id="searchResultsList"></div></div></div><div id="newsItemsContainer"></div><div class="pagination" id="newsPagination"></div></div><aside class="news-sidebar"><div class="author-card"><div class="author-avatar"><img src="images/cat.jpg" alt="大沄"></div><h3 class="author-name">大沄 dayun</h3><p class="author-bio">热爱技术与创新的开发者 | INFJ-T</p><div class="author-social"><a href="https://github.com/dayun126" target="_blank"><i class="fab fa-github"></i></a><a href="https://space.bilibili.com/192702710" target="_blank"><i class="fa-brands fa-bilibili"></i></a><a href="javascript:void(0);" class="email-icon"><i class="fas fa-envelope"></i></a></div></div><div class="tag-cloud"><h3 class="sidebar-title">热门标签</h3><div class="tags"><a href="#" class="tag">AI</a><a href="#" class="tag">编程</a><a href="#" class="tag">Python</a><a href="#" class="tag">前端</a><a href="#" class="tag">UI设计</a><a href="#" class="tag">开源</a><a href="#" class="tag">生活</a><a href="#" class="tag">学习</a></div></div></aside></div></section></main><footer><div class="container"><div class="footer-content"><div class="footer-logo"><a href="./"><img src="images/logo.png" alt="我的网站" class="logo-img"></a></div><div class="social-links"><a href="https://github.com/dayun126" target="_blank"><i class="fab fa-github"></i></a><a href="https://space.bilibili.com/192702710" target="_blank"><i class="fa-brands fa-bilibili"></i></a><a href="javascript:void(0);" class="email-icon"><i class="fas fa-envelope"></i></a></div></div><div class="copyright">© <span id="year">2025</span>大沄 </div></div></footer><div class="email-tooltip"><div class="email-content"><span class="email-address">dayuncloud@qq.com</span><button class="copy-btn">复制</button></div></div><div class="back-to-top"><i class="fas fa-rocket"></i></div><script src="js/main.js"></script><script>document.addEventListener('DOMContentLoaded', function(){ const newsContainer=document.querySelector('.news-container'); const newsItemsContainer=document.getElementById('newsItemsContainer'); const pageLoader=document.querySelector('.page-loader'); const paginationContainer=document.getElementById('newsPagination'); const searchForm=document.getElementById('newsSearchForm'); const searchInput=document.getElementById('newsSearchInput'); const searchResults=document.getElementById('searchResults'); const searchResultsList=document.getElementById('searchResultsList'); const resultsCount=document.getElementById('resultsCount'); document.querySelector('header').style.visibility='visible'; document.querySelector('header').style.opacity='1'; let allNewsData=[]; let loadedNewsData=[]; let loadedPages=new Set(); const ITEMS_PER_PAGE=5; let currentPage=1; let totalPages=0; const PRELOAD_PAGES=2; if (!newsContainer){ console.error('找不到新闻容器元素(.news-container)'); return;} if (!newsItemsContainer){ console.error('找不到新闻项目容器元素(#newsItemsContainer)'); return;} console.log('开始加载动态数据...'); const defaultNewsData=[ { "title": "以下均为默认内容", "image": "images/logo.png", "text": "如果您看到这条内容，说明news_data.json文件加载失败。请确保您通过HTTP服务器访问此页面，而不是直接打开HTML文件。", "tags": ["提示"], "link": "#", "date": "2023/1/1"} ]; function initialLoad(){ document.querySelector('header').style.zIndex='1000'; fetch('news_data.json') .then(response=>{ if (!response.ok){ throw new Error(`HTTP 错误: ${response.status}`);} console.log('成功获取news_data.json'); return response.json();}) .then(data=>{ console.log('成功解析JSON数据:', data.length + '条动态'); allNewsData=data; totalPages=Math.ceil(data.length / ITEMS_PER_PAGE); for (let i=1; i <=Math.min(PRELOAD_PAGES, totalPages); i++){ loadPageData(i);} renderNewsItems(currentPage); renderPagination(totalPages, currentPage); initSearch();}) .catch(error=>{ console.error('加载动态数据时出错:', error); newsContainer.innerHTML +=` <div style="padding: 20px; color: #ff6b6b; background: rgba(255,107,107,0.1); border-radius: 8px; margin-top: 20px; margin-bottom: 20px;"><h3>加载动态数据时发生错误</h3><p>${error.message}</p><p>可能原因：通过文件系统直接打开HTML文件时，浏览器安全限制阻止了加载本地JSON文件。</p><p>解决方法：请通过HTTP服务器访问该页面，例如使用Python的内置服务器：<code>python -m http.server</code></p><p>现在将显示默认内容。</p></div>`; allNewsData=defaultNewsData; loadedNewsData=defaultNewsData.slice(); loadedPages.add(1); renderNewsItems(1); initSearch();}) .finally(()=>{ setTimeout(()=>{ if (pageLoader){ pageLoader.classList.add('hidden'); setTimeout(()=>{ pageLoader.style.display='none';}, 500);} newsContainer.classList.add('loaded');}, 300);});} function loadPageData(page){ if (loadedPages.has(page)){ return Promise.resolve(getPageData(page));} const startIndex=(page - 1) * ITEMS_PER_PAGE; const endIndex=Math.min(startIndex + ITEMS_PER_PAGE, allNewsData.length); const pageData=allNewsData.slice(startIndex, endIndex); for (let i=0; i < pageData.length; i++){ loadedNewsData[startIndex + i]=pageData[i];} loadedPages.add(page); console.log(`第${page}页数据已加载`); return Promise.resolve(pageData);} function getPageData(page){ const startIndex=(page - 1) * ITEMS_PER_PAGE; const endIndex=Math.min(startIndex + ITEMS_PER_PAGE, loadedNewsData.length); return loadedNewsData.slice(startIndex, endIndex);} function preloadNextPage(currentPage){ const nextPage=currentPage + 1; if (nextPage <=totalPages && !loadedPages.has(nextPage)){ console.log(`预加载第${nextPage}页数据...`); loadPageData(nextPage);} if (currentPage===1 && totalPages >2 && !loadedPages.has(3)){ console.log(`预加载第3页数据...`); loadPageData(3);}} function renderPagination(totalPages, currentPage){ if (!paginationContainer) return; paginationContainer.innerHTML=''; if (totalPages <=1){ paginationContainer.style.display='none'; return;} else{ paginationContainer.style.display='flex';} const prevBtn=document.createElement('div'); prevBtn.className=`pagination-btn ${currentPage===1 ? 'disabled' : ''}`; prevBtn.innerHTML='<i class="fas fa-chevron-left"></i>'; if (currentPage >1){ prevBtn.addEventListener('click', ()=>{ currentPage--; renderNewsItems(currentPage); renderPagination(totalPages, currentPage); window.scrollTo({ top: 0, behavior: 'smooth'});});} paginationContainer.appendChild(prevBtn); let startPage=Math.max(1, currentPage - 2); let endPage=Math.min(totalPages, startPage + 4); if (endPage - startPage < 4){ startPage=Math.max(1, endPage - 4);} if (startPage >1){ const firstPageBtn=document.createElement('div'); firstPageBtn.className='pagination-btn'; firstPageBtn.textContent='1'; firstPageBtn.addEventListener('click', ()=>{ currentPage=1; renderNewsItems(currentPage); renderPagination(totalPages, currentPage); window.scrollTo({ top: 0, behavior: 'smooth'});}); paginationContainer.appendChild(firstPageBtn); if (startPage >2){ const ellipsis=document.createElement('div'); ellipsis.className='pagination-ellipsis'; ellipsis.innerHTML='...'; paginationContainer.appendChild(ellipsis);}} for (let i=startPage; i <=endPage; i++){ const pageBtn=document.createElement('div'); pageBtn.className=`pagination-btn ${i===currentPage ? 'active' : ''}`; pageBtn.textContent=i; if (i !==currentPage){ pageBtn.addEventListener('click', ()=>{ currentPage=i; if (!loadedPages.has(currentPage)){ newsContainer.classList.remove('loaded'); loadPageData(currentPage).then(()=>{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage); preloadNextPage(currentPage); newsContainer.classList.add('loaded');});} else{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage); preloadNextPage(currentPage);} window.scrollTo({ top: 0, behavior: 'smooth'});});} paginationContainer.appendChild(pageBtn);} if (endPage < totalPages){ if (endPage < totalPages - 1){ const ellipsis=document.createElement('div'); ellipsis.className='pagination-ellipsis'; ellipsis.innerHTML='...'; paginationContainer.appendChild(ellipsis);} const lastPageBtn=document.createElement('div'); lastPageBtn.className='pagination-btn'; lastPageBtn.textContent=totalPages; lastPageBtn.addEventListener('click', ()=>{ currentPage=totalPages; if (!loadedPages.has(currentPage)){ newsContainer.classList.remove('loaded'); loadPageData(currentPage).then(()=>{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage); newsContainer.classList.add('loaded');});} else{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage);} window.scrollTo({ top: 0, behavior: 'smooth'});}); paginationContainer.appendChild(lastPageBtn);} const nextBtn=document.createElement('div'); nextBtn.className=`pagination-btn ${currentPage===totalPages ? 'disabled' : ''}`; nextBtn.innerHTML='<i class="fas fa-chevron-right"></i>'; if (currentPage < totalPages){ nextBtn.addEventListener('click', ()=>{ currentPage++; if (!loadedPages.has(currentPage)){ newsContainer.classList.remove('loaded'); loadPageData(currentPage).then(()=>{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage); preloadNextPage(currentPage); newsContainer.classList.add('loaded');});} else{ renderNewsItems(currentPage); renderPagination(totalPages, currentPage); preloadNextPage(currentPage);} window.scrollTo({ top: 0, behavior: 'smooth'});});} paginationContainer.appendChild(nextBtn);} function initSearch(){ searchForm.addEventListener('submit', function(e){ e.preventDefault(); const searchTerm=searchInput.value.trim().toLowerCase(); if (searchTerm.length < 1){ searchResults.style.display='none'; return;} const results=performSearch(searchTerm, allNewsData); displaySearchResults(results, searchTerm);}); searchInput.addEventListener('input', function(){ const searchTerm=this.value.trim().toLowerCase(); if (searchTerm.length < 1){ searchResults.style.display='none'; return;} const results=performSearch(searchTerm, allNewsData); displaySearchResults(results, searchTerm);});} function performSearch(searchTerm, data){ return data.filter(item=>{ const titleMatch=item.title.toLowerCase().includes(searchTerm); const textMatch=item.text.toLowerCase().includes(searchTerm); const tagsMatch=item.tags.some(tag=>tag.toLowerCase().includes(searchTerm) ); const dateMatch=item.date.toLowerCase().includes(searchTerm); return titleMatch || textMatch || tagsMatch || dateMatch;});} function displaySearchResults(results, searchTerm){ resultsCount.textContent=results.length; searchResultsList.innerHTML=''; if (results.length===0){ searchResultsList.innerHTML=`<div class="search-no-results">没有找到与"${searchTerm}"相关的内容</div>`;} else{ results.forEach(item=>{ const resultItem=document.createElement('div'); resultItem.className='search-result-item'; const contentPreview=item.text.length >100 ? item.text.substring(0, 100) + '...' : item.text; const highlightedTitle=item.title.replace( new RegExp(searchTerm, 'gi'), match=>`<span class="highlight">${match}</span>` ); const highlightedPreview=contentPreview.replace( new RegExp(searchTerm, 'gi'), match=>`<span class="highlight">${match}</span>` ); const highlightedTags=item.tags.map(tag=>{ if (tag.toLowerCase().includes(searchTerm.toLowerCase())){ return `<span class="search-result-tag highlight">${tag}</span>`;} else{ return `<span class="search-result-tag">${tag}</span>`;}}).join(''); resultItem.innerHTML=` <a href="${item.link}" ${item.link.startsWith('http') ? 'target="_blank" rel="noopener noreferrer"' : ''}><h3 class="result-title">${highlightedTitle}</h3><p class="result-preview">${highlightedPreview}</p><div class="result-footer"><div class="result-tags">${highlightedTags}</div><div class="result-date">${item.date}</div></div></a>`; resultItem.addEventListener('click', function(e){ if (item.link==='#'){ e.preventDefault(); console.log('此文章暂无详情页面');}}); searchResultsList.appendChild(resultItem);});} searchResults.style.display='block';} function renderNewsItems(page){ const existingItems=newsItemsContainer.querySelectorAll('.news-item'); existingItems.forEach(item=>item.remove()); const fragment=document.createDocumentFragment(); const currentPageData=getPageData(page); currentPageData.forEach((newsItem, index)=>{ console.log(`正在渲染第${(page - 1) * ITEMS_PER_PAGE + index + 1}条动态: ${newsItem.title}`); const article=document.createElement('article'); article.classList.add('news-item'); article.setAttribute('data-aos', 'fade-up'); const delays=[0, 100, 200, 300]; const delay=delays[index % delays.length]; if (delay >0){ article.setAttribute('data-aos-delay', delay.toString());} const tagsHtml=newsItem.tags.map(tag=>`<span class="tag">${tag}</span>`).join(''); article.innerHTML=` <div class="news-content"><h2 class="news-title">${newsItem.title}</h2><div class="news-image"><img src="${newsItem.image}" alt="${newsItem.title}" loading="lazy"></div><p class="news-text">${newsItem.text}</p><div class="news-tags">${tagsHtml} </div><div class="news-footer"><a href="${newsItem.link}" class="news-link" ${newsItem.link.startsWith('http') ? 'target="_blank" rel="noopener noreferrer"' : ''}>阅读更多 <i class="fas fa-arrow-right"></i></a><div class="news-date-small">${newsItem.date}</div></div></div>`; fragment.appendChild(article); console.log(`第${(page - 1) * ITEMS_PER_PAGE + index + 1}条动态已渲染就绪`);}); newsItemsContainer.appendChild(fragment); console.log('当前页动态加载完成'); const newsLinks=newsItemsContainer.querySelectorAll('.news-link'); newsLinks.forEach(link=>{ link.addEventListener('click', function(e){ if (this.getAttribute('href')==='#'){ e.preventDefault(); console.log('此文章暂无详情页面');} console.log('链接点击：', this.getAttribute('href'));});}); window.dispatchEvent(new Event('scroll')); setTimeout(()=>{ window.dispatchEvent(new Event('scroll'));}, 50);} initialLoad();}); window.addEventListener('DOMContentLoaded', function(){ const header=document.querySelector('header'); if (header){ header.style.visibility='visible'; header.style.opacity='1'; header.style.zIndex='1000';}}); window.addEventListener('load', function(){ const pageLoader=document.querySelector('.page-loader'); if (pageLoader && !pageLoader.classList.contains('hidden')){ pageLoader.classList.add('hidden'); setTimeout(()=>{ pageLoader.style.display='none';}, 500);}}); </script></body></html>