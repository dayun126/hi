function initTheme(){const e=document.querySelector(".theme-toggle"),t=document.querySelector(".theme-toggle i");e.removeAttribute("title");"true"===localStorage.getItem("darkMode")?(document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode"),t.classList.remove("fa-sun"),t.classList.add("fa-moon"),e.setAttribute("data-tooltip","切换为浅色模式")):(document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode"),t.classList.remove("fa-moon"),t.classList.add("fa-sun"),e.setAttribute("data-tooltip","切换为深色模式")),e.addEventListener("click",(function(){document.body.classList.toggle("dark-mode"),document.documentElement.classList.toggle("dark-mode"),document.body.classList.contains("dark-mode")?(t.classList.remove("fa-sun"),t.classList.add("fa-moon"),localStorage.setItem("darkMode","true"),e.setAttribute("data-tooltip","切换为浅色模式")):(t.classList.remove("fa-moon"),t.classList.add("fa-sun"),localStorage.setItem("darkMode","false"),e.setAttribute("data-tooltip","切换为深色模式"))}))}function initMobileMenu(){const e=document.querySelector(".menu-btn"),t=document.querySelector(".nav-links");e.addEventListener("click",(function(){t.classList.toggle("show");document.querySelectorAll(".bar").forEach((e=>e.classList.toggle("active")))}));document.querySelectorAll(".nav-links a").forEach((e=>{e.addEventListener("click",(function(){t.classList.remove("show");document.querySelectorAll(".bar").forEach((e=>e.classList.remove("active")))}))}))}function initProjectFilters(){const e=document.querySelectorAll(".filter-btn"),t=document.querySelectorAll(".card[data-category]");e.forEach((o=>{o.addEventListener("click",(function(){e.forEach((e=>e.classList.remove("active"))),this.classList.add("active");const o=this.getAttribute("data-filter");t.forEach((e=>{"all"===o||e.getAttribute("data-category")===o?e.style.display="block":e.style.display="none"}))}))}))}function initContactForm(){const e=document.getElementById("contactForm");e.addEventListener("submit",(function(t){t.preventDefault();const o=document.getElementById("name").value,n=document.getElementById("email").value,a=document.getElementById("subject").value,c=document.getElementById("message").value;o&&n&&a&&c?(alert("消息已发送！谢谢您的联系。"),e.reset()):alert("请填写所有必填字段")}))}function initAnimations(){function e(e){const t=e.getBoundingClientRect();return t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.bottom>=0}const t=document.querySelectorAll("[data-aos]");t.forEach((t=>{e(t)&&t.classList.add("aos-animate")})),window.addEventListener("scroll",(function(){t.forEach((t=>{e(t)&&t.classList.add("aos-animate")}))}))}function initEmailFeature(){const e=document.querySelectorAll(".email-icon"),t=document.querySelector(".email-tooltip"),o=document.querySelector(".copy-btn"),n=document.querySelector(".email-address").textContent;e.forEach((e=>{e.addEventListener("click",(function(o){o.preventDefault(),t.classList.toggle("show"),document.addEventListener("click",(function o(n){t.contains(n.target)||e.contains(n.target)||(t.classList.remove("show"),document.removeEventListener("click",o))}))}))})),o.addEventListener("click",(function(){navigator.clipboard.writeText(n).then((()=>{o.textContent="已复制",o.classList.add("copied"),setTimeout((()=>{o.textContent="复制",o.classList.remove("copied")}),2e3)})).catch((e=>{alert("复制失败，请手动复制")}))}))}function initBackToTop(){const e=document.querySelector(".back-to-top");let t,o=!1,n=!1;function a(){e.style.transform="",e.style.boxShadow=""}e.querySelector("i");e.addEventListener("mouseenter",(function(){o=!0,e.classList.remove("fade")})),e.addEventListener("mouseleave",(function(){o=!1,a(),window.scrollY>window.innerHeight&&(clearTimeout(t),t=setTimeout((()=>{o||n||e.classList.add("fade")}),2e3))})),window.addEventListener("scroll",(function(){window.scrollY>window.innerHeight?(e.classList.add("show"),e.classList.remove("fade"),o||n||(clearTimeout(t),t=setTimeout((()=>{o||n||e.classList.add("fade")}),2e3))):(e.classList.remove("show"),n||e.classList.add("fade"))})),e.addEventListener("click",(function(){n=!0,e.classList.add("show"),e.classList.remove("fade"),e.style.transform="translateY(-5px)",window.scrollTo({top:0,behavior:"smooth"});const t=setInterval((function(){0===window.scrollY&&(n=!1,a(),window.scrollY<=window.innerHeight&&(e.classList.remove("show"),e.classList.add("fade")),clearInterval(t))}),100);setTimeout((()=>{clearInterval(t),n=!1,a()}),1e4)})),e.addEventListener("touchend",(function(){setTimeout(a,300)}))}!function(){const e=null===localStorage.getItem("darkMode")||"true"===localStorage.getItem("darkMode");null===localStorage.getItem("darkMode")&&localStorage.setItem("darkMode","true"),e&&document.documentElement.classList.add("dark-mode")}(),document.addEventListener("DOMContentLoaded",(function(){const e=2025,t=(new Date).getFullYear(),o=t>e?`2025-${t}`:e.toString();document.getElementById("year").textContent=o,initTheme(),initMobileMenu(),document.querySelector(".filter-btn")&&initProjectFilters(),document.getElementById("contactForm")&&initContactForm(),initAnimations(),initEmailFeature(),initBackToTop()})),document.addEventListener("DOMContentLoaded",(function(){}));